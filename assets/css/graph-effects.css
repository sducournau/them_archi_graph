/* ================================================
   GRAPH NODE VISUAL EFFECTS
   Enhanced interactions and states
   Cross-browser compatible version
   ================================================ */

/* Node States */
.graph-node {
  -webkit-transition: all 0.3s ease;
  -moz-transition: all 0.3s ease;
  -o-transition: all 0.3s ease;
  transition: all 0.3s ease;
}

.graph-node.node-inactive {
  opacity: 0.5;
  -webkit-filter: grayscale(30%);
  filter: grayscale(30%);
}

.graph-node.node-active {
  opacity: 1;
  -webkit-filter: none;
  filter: none;
}

/* Node Circle Enhancements */
.node-circle {
  -webkit-transition: all 0.2s ease;
  -moz-transition: all 0.2s ease;
  -o-transition: all 0.2s ease;
  transition: all 0.2s ease;
  cursor: pointer;
  cursor: -webkit-grab;
  cursor: -moz-grab;
  cursor: grab;
}

.node-circle:hover {
  -webkit-filter: brightness(1.1);
  filter: brightness(1.1);
}

/* Halo Effect */
.node-halo {
  -webkit-transition: all 0.3s ease;
  -moz-transition: all 0.3s ease;
  -o-transition: all 0.3s ease;
  transition: all 0.3s ease;
  pointer-events: none;
}

/* Shine Effect */
.node-shine {
  -webkit-transition: opacity 0.2s ease;
  -moz-transition: opacity 0.2s ease;
  -o-transition: opacity 0.2s ease;
  transition: opacity 0.2s ease;
  pointer-events: none;
}

/* Label Enhancements */
.node-label {
  -webkit-transition: all 0.2s ease;
  -moz-transition: all 0.2s ease;
  -o-transition: all 0.2s ease;
  transition: all 0.2s ease;
  pointer-events: none;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Shockwave Effect (temporary) */
.node-shockwave {
  pointer-events: none;
  -webkit-animation: shockwave 0.6s ease-out forwards;
  -moz-animation: shockwave 0.6s ease-out forwards;
  animation: shockwave 0.6s ease-out forwards;
}

@-webkit-keyframes shockwave {
  0% {
    r: 30;
    stroke-opacity: 0.8;
  }
  100% {
    r: 90;
    stroke-opacity: 0;
  }
}

@-moz-keyframes shockwave {
  0% {
    r: 30;
    stroke-opacity: 0.8;
  }
  100% {
    r: 90;
    stroke-opacity: 0;
  }
}

@keyframes shockwave {
  0% {
    r: 30;
    stroke-opacity: 0.8;
  }
  100% {
    r: 90;
    stroke-opacity: 0;
  }
}

/* Pulse Animation for Active Nodes */
@-webkit-keyframes node-pulse {
  0%, 100% {
    -webkit-transform: scale(1);
    transform: scale(1);
    opacity: 1;
  }
  50% {
    -webkit-transform: scale(1.05);
    transform: scale(1.05);
    opacity: 0.9;
  }
}

@-moz-keyframes node-pulse {
  0%, 100% {
    -moz-transform: scale(1);
    transform: scale(1);
    opacity: 1;
  }
  50% {
    -moz-transform: scale(1.05);
    transform: scale(1.05);
    opacity: 0.9;
  }
}

@keyframes node-pulse {
  0%, 100% {
    -webkit-transform: scale(1);
    -moz-transform: scale(1);
    -ms-transform: scale(1);
    transform: scale(1);
    opacity: 1;
  }
  50% {
    -webkit-transform: scale(1.05);
    -moz-transform: scale(1.05);
    -ms-transform: scale(1.05);
    transform: scale(1.05);
    opacity: 0.9;
  }
}

.node-pulse-active .node-circle {
  -webkit-animation: node-pulse 2s ease-in-out infinite;
  -moz-animation: node-pulse 2s ease-in-out infinite;
  animation: node-pulse 2s ease-in-out infinite;
}

/* Glow Effect Enhancement */
.node-glow {
  filter: drop-shadow(0 0 8px currentColor);
}

/* Breathing Animation for Inactive Nodes */
@-webkit-keyframes node-breathe {
  0%, 100% {
    opacity: 0.4;
  }
  50% {
    opacity: 0.3;
  }
}

@-moz-keyframes node-breathe {
  0%, 100% {
    opacity: 0.4;
  }
  50% {
    opacity: 0.3;
  }
}

@keyframes node-breathe {
  0%, 100% {
    opacity: 0.4;
  }
  50% {
    opacity: 0.3;
  }
}

.node-inactive .node-circle {
  -webkit-animation: node-breathe 3s ease-in-out infinite;
  -moz-animation: node-breathe 3s ease-in-out infinite;
  animation: node-breathe 3s ease-in-out infinite;
}

/* Hover State Enhancements */
.graph-node:hover .node-circle {
  stroke-width: 3;
  -webkit-filter: brightness(1.15) drop-shadow(0 2px 8px rgba(0, 0, 0, 0.15));
  filter: brightness(1.15) drop-shadow(0 2px 8px rgba(0, 0, 0, 0.15));
}

.graph-node:hover .node-label {
  font-weight: 600;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

/* Click/Active State */
.graph-node:active .node-circle {
  -webkit-transform: scale(0.95);
  -moz-transform: scale(0.95);
  -ms-transform: scale(0.95);
  transform: scale(0.95);
  -webkit-transition: transform 0.05s ease;
  -moz-transition: transform 0.05s ease;
  -o-transition: transform 0.05s ease;
  transition: transform 0.05s ease;
}

/* Focus State for Accessibility */
.graph-node:focus {
  outline: 2px solid #4CAF50;
  outline-offset: 4px;
  border-radius: 50%;
}

/* Featured/Priority Nodes */
.graph-node.node-featured .node-circle {
  stroke-width: 4;
  stroke: #FFD700;
  -webkit-filter: drop-shadow(0 0 12px rgba(255, 215, 0, 0.5));
  filter: drop-shadow(0 0 12px rgba(255, 215, 0, 0.5));
}

.graph-node.node-featured .node-halo {
  stroke: #FFD700;
  stroke-width: 2;
  stroke-opacity: 0.3;
  -webkit-animation: halo-pulse 2s ease-in-out infinite;
  -moz-animation: halo-pulse 2s ease-in-out infinite;
  animation: halo-pulse 2s ease-in-out infinite;
}

@-webkit-keyframes halo-pulse {
  0%, 100% {
    r: 34;
    stroke-opacity: 0.3;
  }
  50% {
    r: 38;
    stroke-opacity: 0.5;
  }
}

@-moz-keyframes halo-pulse {
  0%, 100% {
    r: 34;
    stroke-opacity: 0.3;
  }
  50% {
    r: 38;
    stroke-opacity: 0.5;
  }
}

@keyframes halo-pulse {
  0%, 100% {
    r: 34;
    stroke-opacity: 0.3;
  }
  50% {
    r: 38;
    stroke-opacity: 0.5;
  }
}

/* Connection Highlight on Hover */
.graph-node:hover ~ .graph-link {
  stroke-opacity: 0.2;
}

.graph-link.connected-to-hover {
  stroke-opacity: 1 !important;
  stroke-width: 2;
  stroke: #4CAF50;
  -webkit-animation: link-pulse 1s ease-in-out infinite;
  -moz-animation: link-pulse 1s ease-in-out infinite;
  animation: link-pulse 1s ease-in-out infinite;
}

@-webkit-keyframes link-pulse {
  0%, 100% {
    stroke-opacity: 1;
  }
  50% {
    stroke-opacity: 0.7;
  }
}

@-moz-keyframes link-pulse {
  0%, 100% {
    stroke-opacity: 1;
  }
  50% {
    stroke-opacity: 0.7;
  }
}

@keyframes link-pulse {
  0%, 100% {
    stroke-opacity: 1;
  }
  50% {
    stroke-opacity: 0.7;
  }
}

/* Loading State */
.graph-node.node-loading .node-circle {
  -webkit-animation: node-loading 1.5s linear infinite;
  -moz-animation: node-loading 1.5s linear infinite;
  animation: node-loading 1.5s linear infinite;
}

@-webkit-keyframes node-loading {
  0% {
    -webkit-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@-moz-keyframes node-loading {
  0% {
    -moz-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -moz-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes node-loading {
  0% {
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

/* Error State */
.graph-node.node-error .node-circle {
  fill: #f44336;
  stroke: #d32f2f;
  -webkit-animation: node-shake 0.5s ease-in-out;
  -moz-animation: node-shake 0.5s ease-in-out;
  animation: node-shake 0.5s ease-in-out;
}

@-webkit-keyframes node-shake {
  0%, 100% {
    -webkit-transform: translateX(0);
    transform: translateX(0);
  }
  25% {
    -webkit-transform: translateX(-5px);
    transform: translateX(-5px);
  }
  75% {
    -webkit-transform: translateX(5px);
    transform: translateX(5px);
  }
}

@-moz-keyframes node-shake {
  0%, 100% {
    -moz-transform: translateX(0);
    transform: translateX(0);
  }
  25% {
    -moz-transform: translateX(-5px);
    transform: translateX(-5px);
  }
  75% {
    -moz-transform: translateX(5px);
    transform: translateX(5px);
  }
}

@keyframes node-shake {
  0%, 100% {
    -webkit-transform: translateX(0);
    -moz-transform: translateX(0);
    -ms-transform: translateX(0);
    transform: translateX(0);
  }
  25% {
    -webkit-transform: translateX(-5px);
    -moz-transform: translateX(-5px);
    -ms-transform: translateX(-5px);
    transform: translateX(-5px);
  }
  75% {
    -webkit-transform: translateX(5px);
    -moz-transform: translateX(5px);
    -ms-transform: translateX(5px);
    transform: translateX(5px);
  }
}

/* Drag State */
.graph-node.dragging {
  cursor: grabbing !important;
  cursor: -webkit-grabbing !important;
  cursor: -moz-grabbing !important;
}

.graph-node.dragging .node-circle {
  stroke-width: 4;
  -webkit-filter: brightness(1.2) drop-shadow(0 4px 12px rgba(0, 0, 0, 0.3));
  filter: brightness(1.2) drop-shadow(0 4px 12px rgba(0, 0, 0, 0.3));
  animation: node-shake 0.5s ease-in-out;
}

@keyframes node-shake {
  0%, 100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-5px);
  }
  75% {
    transform: translateX(5px);
  }
}

/* Drag State */
.graph-node.dragging {
  cursor: grabbing !important;
}

.graph-node.dragging .node-circle {
  stroke-width: 4;
  filter: brightness(1.2) drop-shadow(0 4px 12px rgba(0, 0, 0, 0.3));
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  .node-label {
    font-size: 10px;
  }
  
  .graph-node:hover .node-circle {
    stroke-width: 2;
  }
}

/* Print Styles */
@media print {
  .node-halo,
  .node-shine {
    display: none;
  }
  
  .graph-node {
    filter: none !important;
  }
}

/* High Contrast Mode */
@media (prefers-contrast: high) {
  .node-circle {
    stroke-width: 3;
  }
  
  .node-label {
    font-weight: 600;
    text-shadow: 0 0 2px white;
  }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  .graph-node,
  .node-circle,
  .node-halo,
  .node-shine,
  .node-label {
    animation: none !important;
    transition: none !important;
  }
}
